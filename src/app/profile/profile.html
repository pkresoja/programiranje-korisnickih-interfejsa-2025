<div class="card mb-3">
    <div class="card-header">
        <h5>User Profile</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-12 col-md-6">
                <table class="table table-striped table-hover">
                    <tbody>
                        <tr>
                            <th scope="row">First Name:</th>
                            <td>{{currentUser()?.firstName}}</td>
                        </tr>
                        <tr>
                            <th scope="row">Last Name:</th>
                            <td>{{currentUser()?.lastName}}</td>
                        </tr>
                        <tr>
                            <th scope="row">Email:</th>
                            <td>{{currentUser()?.email}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-12 col-md-6">
                <table class="table table-striped table-hover">
                    <tbody>
                        <tr>
                            <th scope="row">Phone:</th>
                            <td>{{currentUser()?.phone}}</td>
                        </tr>
                        <tr>
                            <th scope="row">Favourite Destination:</th>
                            <td>{{currentUser()?.destination}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card-footer">
        <button class="btn btn-primary">
            <i class="fa-solid fa-floppy-disk"></i> Save Changes
        </button>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h5>Reservations</h5>
    </div>
    <div class="card-body">
        @if(currentUser()?.data!.length > 0) {
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Flight Number</th>
                    <th scope="col">Destination</th>
                    <th scope="col">Deparuture At</th>
                    <th scope="col">Airline</th>
                    <th scope="col">Suite</th>
                    <th scope="col">Status</th>
                    <th scope="col">Updated At</th>
                    <th scope="col">Options</th>
                </tr>
            </thead>
            <tbody>
                @for (r of currentUser()?.data; track $index) {
                <tr [attr.data-flight-id]="r.flightId">
                    <th scope="row">{{getFlight(r)?.flightNumber}}</th>
                    <td>{{getFlight(r)?.destination}}</td>
                    <td>{{utils.formatDate(getFlight(r)!.scheduledAt)}}</td>
                    <td>{{r.airline}}</td>
                    <td>{{r.suite}}</td>
                    <td>{{r.status}}</td>
                    <td>{{utils.formatDate(r.updatedAt ?? r.createdAt)}}</td>
                    <td>
                        <div class="btn-group">
                            @if (r.status == 'waiting') {
                            <button type="button" class="btn btn-sm btn-primary" (click)="pay(r)">
                                <i class="fa-solid fa-credit-card"></i> Pay
                            </button>
                            <button type="button" class="btn btn-sm btn-danger" (click)="cancel(r)">
                                <i class="fa-solid fa-ban"></i> Cancel
                            </button>
                            } @else if (r.status == 'paid') {
                            <button type="button" class="btn btn-sm btn-success" (click)="like(r)">
                                <i class="fa-solid fa-thumbs-up"></i> Like
                            </button>
                            <button type="button" class="btn btn-sm btn-danger" (click)="dislike(r)">
                                <i class="fa-solid fa-thumbs-down"></i> Dislike
                            </button>
                            } @else {
                            /
                            }
                        </div>
                    </td>
                </tr>
                }
            </tbody>
        </table>
        } @else {
            <p class="text-center fw-bold">
                You haven't made any reservations yet!
            </p>
        }
    </div>
</div>